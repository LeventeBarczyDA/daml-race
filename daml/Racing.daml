daml 1.2 
module Racing where 

import RacingTypes

import DA.List 
import DA.Date
import DA.Time

template RegisteredRacer
  with 
    racer: Party 
    organizer: Party 
    --credIssuer: Party
    bibNumber: BibNumber 
    raceTitle: Text
    raceDate: Date
  where 
    signatory racer, organizer, --credIssuer 

    key (racer, RaceKey 
      with 
        organizer
        title = raceTitle
        date = raceDate ): (Party, RaceKey)
    maintainer key._2.organizer

